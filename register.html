<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ©Ÿç¨®ç™»éŒ²ç®¡ç†</title>
  <style>
    /* å…¨ä½“çš„ãªãƒªã‚»ãƒƒãƒˆ */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* bodyã®ã‚¹ã‚¿ã‚¤ãƒ«: ãƒ•ã‚©ãƒ³ãƒˆã€èƒŒæ™¯ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€æœ€å°é«˜ã•ã€ãƒ‘ãƒ‡ã‚£ãƒ³ã‚° */
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠã®ã‚¹ã‚¿ã‚¤ãƒ«: æœ€å¤§å¹…ã€ä¸­å¤®å¯„ã›ã€èƒŒæ™¯ã€è§’ä¸¸ã€å½±ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼å‡¦ç† */
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«: èƒŒæ™¯ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€æ–‡å­—è‰²ã€ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã€ä¸­å¤®å¯„ã› */
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }

    /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚¿ã‚¤ãƒˆãƒ« */
    .header h1 { font-size: 28px; margin-bottom: 10px; }

    /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .content { padding: 30px; }

    /* ãƒ•ã‚©ãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .form-section {
      background: #f8f9fa;
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 30px;
    }

    /* ãƒ•ã‚©ãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¿ã‚¤ãƒˆãƒ« */
    .form-section h2 {
      color: #667eea;
      margin-bottom: 20px;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* ãƒ•ã‚©ãƒ¼ãƒ ã‚°ãƒ«ãƒ¼ãƒ— (ãƒ©ãƒ™ãƒ«ã¨å…¥åŠ›æ¬„ã®ã‚»ãƒƒãƒˆ) ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .form-group {
      margin-bottom: 20px;
    }

    /* ãƒ©ãƒ™ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
    }

    /* inputã¨selectè¦ç´ ã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
    input, select {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s;
    }

    /* inputã¨selectè¦ç´ ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    input:focus, select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    /* ãƒœã‚¿ãƒ³ã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
    .btn {
      width: 100%;
      padding: 15px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    /* ãƒ—ãƒ©ã‚¤ãƒãƒªãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    /* ãƒ—ãƒ©ã‚¤ãƒãƒªãƒœã‚¿ãƒ³ãƒ›ãƒãƒ¼æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
    }

    /* å±é™ºæ“ä½œãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .btn-danger {
      background: #ff4757;
      color: white;
      margin-top: 10px;
    }

    /* å±é™ºæ“ä½œãƒœã‚¿ãƒ³ãƒ›ãƒãƒ¼æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .btn-danger:hover {
      background: #ff3838;
      transform: translateY(-2px);
    }

    /* æ©Ÿç¨®ãƒªã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .machine-list {
      max-height: 400px;
      overflow-y: auto;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      padding: 15px;
    }

    /* æ©Ÿç¨®ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ å€‹åˆ¥ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .machine-item {
      background: white;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 10px;
      border-left: 4px solid #667eea;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s;
    }

    /* æ©Ÿç¨®ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ãƒ›ãƒãƒ¼æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .machine-item:hover {
      transform: translateX(5px);
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }

    /* æ©Ÿç¨®æƒ…å ±ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .machine-info {
      flex: 1;
    }

    /* æ©Ÿç¨®åã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .machine-name {
      font-weight: 600;
      color: #333;
      margin-bottom: 5px;
    }

    /* æ©Ÿç¨®ã‚¿ã‚¤ãƒ—è¡¨ç¤ºã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .machine-type {
      display: inline-block;
      padding: 4px 12px;
      background: #667eea;
      color: white;
      border-radius: 20px;
      font-size: 12px;
    }

    /* å‰Šé™¤ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« (æ©Ÿç¨®ã‚¢ã‚¤ãƒ†ãƒ å†…) */
    .btn-delete {
      padding: 8px 15px;
      background: #ff4757;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
    }

    /* å‰Šé™¤ãƒœã‚¿ãƒ³ãƒ›ãƒãƒ¼æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« (æ©Ÿç¨®ã‚¢ã‚¤ãƒ†ãƒ å†…) */
    .btn-delete:hover {
      background: #ff3838;
    }

    /* ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .suggest-box {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 2px solid #667eea;
      border-top: none;
      border-radius: 0 0 10px 10px;
      max-height: 200px;
      overflow-y: auto;
      z-index: 10;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }

    /* ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹å†…ã®å„å€™è£œã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .suggest-box div {
      padding: 12px 15px;
      cursor: pointer;
      transition: all 0.2s;
    }

    /* ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹å†…ã®å„å€™è£œã‚¢ã‚¤ãƒ†ãƒ ãƒ›ãƒãƒ¼æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .suggest-box div:hover {
      background: #f0f2ff;
    }

    /* ã‚¢ãƒ©ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
    .alert {
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      animation: slideIn 0.3s; /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    }

    /* æˆåŠŸã‚¢ãƒ©ãƒ¼ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .alert-success {
      background: #d4edda;
      color: #155724;
      border: 2px solid #c3e6cb;
    }

    /* å±é™ºã‚¢ãƒ©ãƒ¼ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .alert-danger {
      background: #f8d7da;
      color: #721c24;
      border: 2px solid #f5c6cb;
    }

    /* è­¦å‘Šã‚¢ãƒ©ãƒ¼ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .alert-warning {
      background: #fff3cd;
      color: #856404;
      border: 2px solid #ffeaa7;
    }

    /* ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* çµ±è¨ˆæƒ…å ±ã®ã‚³ãƒ³ãƒ†ãƒŠã‚¹ã‚¿ã‚¤ãƒ« */
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãª3åˆ— */
      gap: 15px;
      margin-bottom: 30px;
    }

    /* çµ±è¨ˆæƒ…å ±ãƒœãƒƒã‚¯ã‚¹å€‹åˆ¥ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .stat-box {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
    }

    /* çµ±è¨ˆæ•°å€¤ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .stat-number {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    /* çµ±è¨ˆãƒ©ãƒ™ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .stat-label {
      font-size: 14px;
      opacity: 0.9;
    }

    /* æˆ»ã‚‹ãƒªãƒ³ã‚¯ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .back-link {
      display: inline-block;
      margin-top: 20px;
      padding: 10px 20px;
      background: rgba(255,255,255,0.2);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.3s;
    }

    /* æˆ»ã‚‹ãƒªãƒ³ã‚¯ãƒ›ãƒãƒ¼æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .back-link:hover {
      background: rgba(255,255,255,0.3);
      transform: translateY(-2px);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ° æ©Ÿç¨®ç™»éŒ²ç®¡ç†</h1>
      <p>æ–°ã—ã„æ©Ÿç¨®ã‚’ç™»éŒ²ã—ãŸã‚Šã€æ—¢å­˜ã®æ©Ÿç¨®ã‚’ç®¡ç†ã§ãã¾ã™</p>
      <a href="pachinko_index.html" class="back-link">â† åæ”¯ç®¡ç†ã«æˆ»ã‚‹</a>
    </div>

    <div class="content">
      <!-- çµ±è¨ˆæƒ…å ±è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
      <div class="stats">
        <div class="stat-box">
          <div class="stat-number" id="base-count">0</div>
          <div class="stat-label">ç™»éŒ²æ¸ˆã¿æ©Ÿç¨®</div>
        </div>
        <div class="stat-box">
          <div class="stat-number" id="user-count">0</div>
          <div class="stat-label">ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ </div>
        </div>
        <div class="stat-box">
          <div class="stat-number" id="total-count">0</div>
          <div class="stat-label">åˆè¨ˆæ©Ÿç¨®æ•°</div>
        </div>
      </div>

      <!-- ã‚¢ãƒ©ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
      <div id="alert-area"></div>

      <!-- æ–°è¦æ©Ÿç¨®ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="form-section">
        <h2>ğŸ“ æ–°ã—ã„æ©Ÿç¨®ã‚’ç™»éŒ²</h2>
        <form id="register-form">
          <div class="form-group" style="position: relative;">
            <label for="machine-name">æ©Ÿç¨®å</label>
            <input type="text" id="machine-name" placeholder="ä¾‹: ã‚¹ãƒã‚¹ãƒ­ ãƒ¢ãƒ³ã‚­ãƒ¼ã‚¿ãƒ¼ãƒ³V" required autocomplete="off">
            <!-- æ©Ÿç¨®åã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div id="suggestions" class="suggest-box"></div>
          </div>

          <!-- ã‚¸ãƒ£ãƒ³ãƒ«é¸æŠ -->
          <div class="form-group">
            <label for="machine-genre">ã‚¸ãƒ£ãƒ³ãƒ«</label>
            <select id="machine-genre" required>
              <option value="pachislot">ğŸ° ãƒ‘ãƒã‚¹ãƒ­</option>
              <option value="pachinko">ğŸ¯ ãƒ‘ãƒãƒ³ã‚³</option>
            </select>
          </div>

          <div class="form-group">
            <label for="machine-type">æ©Ÿç¨®ã‚¿ã‚¤ãƒ—</label>
            <!-- æ©Ÿç¨®ã‚¿ã‚¤ãƒ—é¸æŠ (ã‚¸ãƒ£ãƒ³ãƒ«ã«å¿œã˜ã¦å†…å®¹ãŒå¤‰åŒ–) -->
            <select id="machine-type" required>
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="ã‚¹ãƒã‚¹ãƒ­">ã‚¹ãƒã‚¹ãƒ­</option>
              <option value="AT">AT</option>
              <option value="Aã‚¿ã‚¤ãƒ—">Aã‚¿ã‚¤ãƒ—</option>
            </select>
          </div>

          <button type="submit" class="btn btn-primary">âœ… ç™»éŒ²ã™ã‚‹</button>
        </form>
      </div>

      <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿç¨®ä¸€è¦§è¡¨ç¤ºã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="form-section">
        <h2>ğŸ“‹ ç™»éŒ²æ¸ˆã¿æ©Ÿç¨®ä¸€è¦§ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ åˆ†ï¼‰</h2>
        <div class="machine-list" id="user-machine-list">
          <p style="text-align: center; color: #999;">ã¾ã æ©Ÿç¨®ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
        </div>
        <button class="btn btn-danger" onclick="clearAllUserMachines()">ğŸ—‘ï¸ ã™ã¹ã¦ã‚¯ãƒªã‚¢</button>
      </div>
    </div>
  </div>

  <script>
    // ------------------------------
    // ğŸ”§ åˆæœŸãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
    // ------------------------------
    let baseMachines = []; // å¤–éƒ¨JSONã‹ã‚‰èª­ã¿è¾¼ã‚€åŸºæœ¬æ©Ÿç¨®ãƒªã‚¹ãƒˆ
    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¿½åŠ ã—ãŸæ©Ÿç¨®ãƒªã‚¹ãƒˆã‚’èª­ã¿è¾¼ã¿ã€ãªã‘ã‚Œã°ç©ºã®é…åˆ—
    let userMachines = JSON.parse(localStorage.getItem("userMachines") || "[]");

    // dmmMachines.json ã‹ã‚‰æ©Ÿç¨®ãƒ‡ãƒ¼ã‚¿ã‚’éåŒæœŸã§èª­ã¿è¾¼ã‚€
    fetch("dmmMachines.json")
      .then(res => res.json())
      .then(data => {
        baseMachines = data; // èª­ã¿è¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã‚’åŸºæœ¬æ©Ÿç¨®ãƒªã‚¹ãƒˆã«ã‚»ãƒƒãƒˆ
        updateStats(); // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
      })
      .catch(error => console.error("Error loading dmmMachines.json:", error));

    // ------------------------------
    // ğŸ§  æ­£è¦åŒ–ãƒ»ç•¥ç§°å‡¦ç†
    // ------------------------------

    /**
     * æ©Ÿç¨®åã‚’æ­£è¦åŒ–ã™ã‚‹é–¢æ•°
     * - ä¸è¦ãªè¨˜å·ã‚„æ©Ÿç¨®ã‚¿ã‚¤ãƒ—ã‚’ç¤ºã™ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’é™¤å»
     * - ã‚¹ãƒšãƒ¼ã‚¹ã‚’é™¤å»ã—ã€å°æ–‡å­—ã«å¤‰æ›
     * @param {string} name - æ­£è¦åŒ–ã™ã‚‹æ©Ÿç¨®å
     * @returns {string} æ­£è¦åŒ–ã•ã‚ŒãŸæ©Ÿç¨®å
     */
    function normalizeName(name) {
      return name
        .replace(/[^\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Han}a-zA-Z0-9ãƒ¼]/gu, "") // æ—¥æœ¬èªã€è‹±æ•°å­—ã€é•·éŸ³è¨˜å·ä»¥å¤–ã®è¨˜å·ã‚’é™¤å»
        .replace(/ã‚¹ãƒã‚¹ãƒ­|Aã‚¿ã‚¤ãƒ—|AT|ART|SLOT|ãƒ‘ãƒãƒ³ã‚³|ãƒ‘ãƒã‚¹ãƒ­|CR|P/gi, "") // æ©Ÿç¨®ã‚¿ã‚¤ãƒ—ã«é–¢ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’é™¤å» (å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„)
        .replace(/\s/g, "") // ã‚¹ãƒšãƒ¼ã‚¹ã‚’é™¤å»
        .toLowerCase(); // å°æ–‡å­—ã«å¤‰æ›
    }

    // æ©Ÿç¨®åã®ç•¥ç§°ã‚„åˆ¥åã‚’ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    const aliasMap = {
      "æ±äº¬å–°ç¨®": ["ã‚°ãƒ¼ãƒ«", "æ±äº¬ã‚°ãƒ¼ãƒ«", "å–°ç¨®"],
      "åŒ—æ–—ã®æ‹³": ["åŒ—æ–—", "ãƒ›ã‚¯ãƒˆ"],
      "ãƒã‚¸ãƒªã‚¹ã‚¯çµ†2": ["çµ†", "ãƒã‚¸2", "çµ†2"],
      "ãƒ¢ãƒ³ã‚­ãƒ¼ã‚¿ãƒ¼ãƒ³": ["ãƒ¢ãƒ³ã‚­ãƒ¼", "çŒ¿"],
      "ã‹ã‚‰ãã‚Šã‚µãƒ¼ã‚«ã‚¹": ["ã‹ã‚‰ã‚µ", "ã‹ã‚‰ãã‚Š"],
      "ã‹ãã‚„æ§˜ã¯å‘Šã‚‰ã›ãŸã„": ["ã‹ãã‚„æ§˜", "ã‹ãã‚„"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "Re:ã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹ç•°ä¸–ç•Œç”Ÿæ´» season2": ["ãƒªã‚¼ãƒ­", "Re:ã‚¼ãƒ­", "rezero"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ã‚³ãƒ¼ãƒ‰ã‚®ã‚¢ã‚¹ åé€†ã®ãƒ«ãƒ«ãƒ¼ã‚·ãƒ¥/å¾©æ´»ã®ãƒ«ãƒ«ãƒ¼ã‚·ãƒ¥": ["ã‚®ã‚¢ã‚¹", "ã‚³ãƒ¼ãƒ‰ã‚®ã‚¢ã‚¹"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ç‚ç‚ãƒæ¶ˆé˜²éšŠ": ["ç‚ç‚"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ã‚´ãƒ–ãƒªãƒ³ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼": ["ã‚´ãƒ–ã‚¹ãƒ¬"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ã«å‡ºä¼šã„ã‚’æ±‚ã‚ã‚‹ã®ã¯é–“é•ã£ã¦ã„ã‚‹ã ã‚ã†ã‹2": ["ãƒ€ãƒ³ã¾ã¡"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "è»¢ç”Ÿã—ãŸã‚‰ã‚¹ãƒ©ã‚¤ãƒ ã ã£ãŸä»¶": ["è»¢ã‚¹ãƒ©"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ã¨ã‚ã‚‹é­”è¡“ã®ç¦æ›¸ç›®éŒ²": ["ã¨ã‚ã‚‹"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ãƒã‚¤ã‚ªãƒã‚¶ãƒ¼ãƒ‰:ãƒ´ã‚§ãƒ³ãƒ‡ãƒƒã‚¿": ["ãƒã‚¤ã‚ª"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "é¬¼æ­¦è€…3": ["é¬¼æ­¦è€…"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ãƒã‚¯ãƒ­ã‚¹ãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢4": ["ãƒã‚¯ãƒ­ã‚¹F"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ã²ãã‚‰ã—ã®ãªãé ƒã« æ¥­": ["ã²ãã‚‰ã—"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ã‚½ãƒ¼ãƒ‰ã‚¢ãƒ¼ãƒˆãƒ»ã‚ªãƒ³ãƒ©ã‚¤ãƒ³": ["SAO", "sao"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "åŠ‡å ´ç‰ˆ é­”æ³•å°‘å¥³ã¾ã©ã‹â˜†ãƒã‚®ã‚« [æ–°ç·¨] å›é€†ã®ç‰©èª": ["ã¾ã©ãƒã‚®", "ã¾ã©ã‹"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "æˆ¦å›½ä¹™å¥³4 æˆ¦ä¹±ã«é–ƒãç‚¯çœ¼ã®è»å¸«": ["æˆ¦å›½ä¹™å¥³"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ç”²é‰„åŸã®ã‚«ãƒãƒãƒª": ["ã‚«ãƒãƒãƒª"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "äº¤éŸ¿è©©ç¯‡ã‚¨ã‚¦ãƒ¬ã‚«ã‚»ãƒ–ãƒ³4 HI-EVOLUTION": ["ã‚¨ã‚¦ãƒ¬ã‚«", "ã‚¨ã‚¦ãƒ¬ã‚«ã‚»ãƒ–ãƒ³"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚«ãƒ ã‚¤": ["é‡‘ã‚«ãƒ "], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ãƒ‡ãƒ“ãƒ« ãƒ¡ã‚¤ ã‚¯ãƒ©ã‚¤5": ["DMC", "ãƒ‡ãƒ“ãƒ«ãƒ¡ã‚¤ã‚¯ãƒ©ã‚¤"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "ã‚®ãƒ«ãƒ†ã‚£ã‚¯ãƒ©ã‚¦ãƒ³2": ["ã‚®ãƒ«ã‚¯ãƒ©"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "æŠ¼å¿ï¼ç•ªé•·ZERO": ["ç•ªé•·ã‚¼ãƒ­"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "æŠ¼å¿ï¼ç•ªé•·4": ["ç•ªé•·4"], // ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚‚è¿½åŠ 
      "Re:ã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹ç•°ä¸–ç•Œç”Ÿæ´» season2": ["ãƒªã‚¼ãƒ­"],
      "ãƒ±ãƒ´ã‚¡ãƒ³ã‚²ãƒªãƒ²ãƒ³ ï½ç´„æŸã®æ‰‰ï½": ["ã‚¨ãƒ´ã‚¡", "eva"],
      "çœŸãƒ»èŠ±ã®æ…¶æ¬¡": ["æ…¶æ¬¡", "ã‘ã„ã˜"],
      "ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãƒãƒ³ã‚¿ãƒ¼ãƒ¯ãƒ¼ãƒ«ãƒ‰ï¼šã‚¢ã‚¤ã‚¹ãƒœãƒ¼ãƒ³": ["ãƒ¢ãƒ³ãƒãƒ³ã‚¢ã‚¤ã‚¹ãƒœãƒ¼ãƒ³", "MHã‚¢ã‚¤ã‚¹ãƒœãƒ¼ãƒ³"]
    };

    /**
     * å…¥åŠ›ã•ã‚ŒãŸæ©Ÿç¨®åãŒç•¥ç§°ã®å ´åˆã€æ­£å¼åç§°ã‚’è§£æ±ºã™ã‚‹é–¢æ•°
     * @param {string} input - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸæ©Ÿç¨®å
     * @returns {string} è§£æ±ºã•ã‚ŒãŸæ­£å¼åç§°ã€ã¾ãŸã¯å…ƒã®å…¥åŠ›
     */
    function resolveAlias(input) {
      const normalizedInput = input.toLowerCase();
      for (const [official, aliases] of Object.entries(aliasMap)) {
        if (aliases.some(alias => normalizedInput.includes(alias.toLowerCase()))) {
          return official;
        }
      }
      return input; // è§£æ±ºã§ããªã„å ´åˆã¯å…ƒã®å…¥åŠ›ã‚’è¿”ã™
    }

    /**
     * æŒ‡å®šã•ã‚ŒãŸæ©Ÿç¨®åãŒæ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ï¼ˆåŸºæœ¬æ©Ÿç¨®ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ æ©Ÿç¨®ï¼‰ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°
     * @param {string} name - ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ©Ÿç¨®å
     * @returns {boolean} é‡è¤‡ã—ã¦ã„ã‚‹å ´åˆã¯trueã€ãã†ã§ãªã„å ´åˆã¯false
     */
    function isDuplicate(name) {
      const normalized = normalizeName(name);
      const allMachines = [...baseMachines, ...userMachines]; // å…¨ã¦ã®æ©Ÿç¨®ãƒªã‚¹ãƒˆã‚’çµåˆ
      return allMachines.some(m => normalizeName(m.name) === normalized);
    }

    // ------------------------------
    // âš™ï¸ ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
    // ------------------------------

    // ã‚¸ãƒ£ãƒ³ãƒ«é¸æŠ (ãƒ‘ãƒã‚¹ãƒ­/ãƒ‘ãƒãƒ³ã‚³) ãŒå¤‰æ›´ã•ã‚ŒãŸéš›ã®å‡¦ç†
    document.getElementById("machine-genre").addEventListener("change", function() {
      const genre = this.value;
      const typeSelect = document.getElementById("machine-type");
      
      // é¸æŠã•ã‚ŒãŸã‚¸ãƒ£ãƒ³ãƒ«ã«å¿œã˜ã¦æ©Ÿç¨®ã‚¿ã‚¤ãƒ—ã®é¸æŠè‚¢ã‚’å‹•çš„ã«å¤‰æ›´
      if (genre === "pachinko") {
        typeSelect.innerHTML = `
          <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
          <option value="ãƒ‡ã‚¸ãƒ‘ãƒ">ãƒ‡ã‚¸ãƒ‘ãƒ</option>
          <option value="1ç¨®2ç¨®æ··åˆ">1ç¨®2ç¨®æ··åˆ</option>
          <option value="ç¾½æ ¹ã‚‚ã®">ç¾½æ ¹ã‚‚ã®</option>
        `;
      } else { // pachislot ã®å ´åˆ
        typeSelect.innerHTML = `
          <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
          <option value="ã‚¹ãƒã‚¹ãƒ­">ã‚¹ãƒã‚¹ãƒ­</option>
          <option value="AT">AT</option>
          <option value="Aã‚¿ã‚¤ãƒ—">Aã‚¿ã‚¤ãƒ—</option>
        `;
      }
    });

    // æ©Ÿç¨®åå…¥åŠ›æ¬„ã§ã®ã‚µã‚¸ã‚§ã‚¹ãƒˆæ©Ÿèƒ½
    const machineInput = document.getElementById("machine-name");
    const suggestionsBox = document.getElementById("suggestions");

    machineInput.addEventListener("input", function() {
      const rawInput = this.value.trim();
      const input = normalizeName(resolveAlias(rawInput)); // å…¥åŠ›å€¤ã‚’æ­£è¦åŒ–ãƒ»ç•¥ç§°è§£æ±º
      suggestionsBox.innerHTML = ""; // ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã‚’ã‚¯ãƒªã‚¢
      
      if (!input || input.length < 1) return; // å…¥åŠ›ãŒçŸ­ã„å ´åˆã¯å‡¦ç†ã—ãªã„

      const selectedGenre = document.getElementById("machine-genre").value; // ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹ã‚¸ãƒ£ãƒ³ãƒ«
      const all = [...baseMachines, ...userMachines]; // å…¨ã¦ã®æ©Ÿç¨®ãƒªã‚¹ãƒˆ

      // é¸æŠã‚¸ãƒ£ãƒ³ãƒ«ã«åŸºã¥ã„ã¦æ©Ÿç¨®ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
      const genreFiltered = all.filter(m => !m.genre || m.genre === selectedGenre);
      // å…¥åŠ›å€¤ã«éƒ¨åˆ†ä¸€è‡´ã™ã‚‹æ©Ÿç¨®ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
      const matches = genreFiltered.filter(m => normalizeName(m.name).includes(input));

      if (matches.length === 0) {
        // ä¸€è‡´ã™ã‚‹æ©Ÿç¨®ãŒãªã„å ´åˆã€æ–°è¦ç™»éŒ²ã‚’ä¿ƒã™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        const div = document.createElement("div");
        div.style.color = "#888";
        div.style.fontStyle = "italic";
        div.textContent = `"${rawInput}" ã‚’æ–°è¦ç™»éŒ²`;
        suggestionsBox.appendChild(div);
        return;
      }

      // ä¸Šä½10ä»¶ã®ã‚µã‚¸ã‚§ã‚¹ãƒˆã‚’è¡¨ç¤º
      matches.slice(0, 10).forEach(m => {
        const div = document.createElement("div");
        // ã‚¸ãƒ£ãƒ³ãƒ«ã«å¿œã˜ã¦ã‚¢ã‚¤ã‚³ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆ
        const genreIcon = m.genre === 'pachinko' ? 'ğŸ¯' : 'ğŸ°';
        div.textContent = `${genreIcon} ${m.name}ï¼ˆ${m.type}ï¼‰`;
        div.onclick = () => {
          machineInput.value = m.name; // é¸æŠã•ã‚ŒãŸæ©Ÿç¨®åã‚’å…¥åŠ›æ¬„ã«ã‚»ãƒƒãƒˆ
          document.getElementById("machine-genre").value = m.genre || 'pachislot'; // ã‚¸ãƒ£ãƒ³ãƒ«ã‚’ã‚»ãƒƒãƒˆ
          document.getElementById("machine-genre").dispatchEvent(new Event('change')); // ã‚¸ãƒ£ãƒ³ãƒ«å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã•ã›ã¦æ©Ÿç¨®ã‚¿ã‚¤ãƒ—ã‚’æ›´æ–°
          document.getElementById("machine-type").value = m.type; // æ©Ÿç¨®ã‚¿ã‚¤ãƒ—ã‚’ã‚»ãƒƒãƒˆ
          suggestionsBox.innerHTML = ""; // ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã‚’é–‰ã˜ã‚‹
          // æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹æ©Ÿç¨®ã‚’é¸æŠã—ãŸå ´åˆã€è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
          showAlert("warning", "âš ï¸ ã“ã®æ©Ÿç¨®ã¯æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ (DMMãƒ‡ãƒ¼ã‚¿ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ æ¸ˆã¿)");
        };
        suggestionsBox.appendChild(div);
      });
    });

    // å…¥åŠ›æ¬„ã‹ã‚‰ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒå¤–ã‚ŒãŸã‚‰ã€å°‘ã—é…ã‚Œã¦ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã‚’é–‰ã˜ã‚‹
    machineInput.addEventListener("blur", () => {
      setTimeout(() => suggestionsBox.innerHTML = "", 200);
    });

    // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®å‡¦ç†
    document.getElementById("register-form").addEventListener("submit", function(e) {
      e.preventDefault(); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚’é˜²æ­¢

      const name = document.getElementById("machine-name").value.trim();
      const type = document.getElementById("machine-type").value;
      const genre = document.getElementById("machine-genre").value;

      // æœªå…¥åŠ›é …ç›®ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
      if (!name || !type || !genre) {
        showAlert("danger", "âŒ ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
        return;
      }

      // æ©Ÿç¨®ãŒæ—¢ã«ç™»éŒ²æ¸ˆã¿ã‹ãƒã‚§ãƒƒã‚¯
      if (isDuplicate(name)) {
        showAlert("danger", "âŒ ã“ã®æ©Ÿç¨®ã¯æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™");
        return;
      }

      // æ–°ã—ã„æ©Ÿç¨®ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ æ©Ÿç¨®ãƒªã‚¹ãƒˆã«è¿½åŠ 
      userMachines.push({ name, type, genre });
      localStorage.setItem("userMachines", JSON.stringify(userMachines)); // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜

      // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã€ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
      const genreIcon = genre === 'pachinko' ? 'ğŸ¯' : 'ğŸ°';
      showAlert("success", `âœ… ${genreIcon} ${name} ã‚’ç™»éŒ²ã—ã¾ã—ãŸï¼`);
      document.getElementById("register-form").reset();
      updateUserMachineList(); // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ©Ÿç¨®ãƒªã‚¹ãƒˆè¡¨ç¤ºã‚’æ›´æ–°
      updateStats(); // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
    });

    // ------------------------------
    // ğŸ–¥ï¸ UIæ›´æ–°é–¢æ•°
    // ------------------------------

    /**
     * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¿½åŠ ã—ãŸæ©Ÿç¨®ã®ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã‚¨ãƒªã‚¢ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹é–¢æ•°
     */
    function updateUserMachineList() {
      const list = document.getElementById("user-machine-list");
      list.innerHTML = ""; // æ—¢å­˜ãƒªã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢

      if (userMachines.length === 0) {
        // ç™»éŒ²æ©Ÿç¨®ãŒãªã„å ´åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        list.innerHTML = '<p style="text-align: center; color: #999;">ã¾ã æ©Ÿç¨®ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>';
        return;
      }

      // å„ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ æ©Ÿç¨®ã‚’ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã¨ã—ã¦è¡¨ç¤º
      userMachines.forEach((machine, index) => {
        const div = document.createElement("div");
        div.className = "machine-item";
        const genreIcon = machine.genre === 'pachinko' ? 'ğŸ¯' : 'ğŸ°';
        div.innerHTML = `
          <div class="machine-info">
            <div class="machine-name">${genreIcon} ${machine.name}</div>
            <span class="machine-type">${machine.type}</span>
          </div>
          <button class="btn-delete" onclick="deleteMachine(${index})">å‰Šé™¤</button>
        `;
        list.appendChild(div);
      });
    }

    /**
     * æŒ‡å®šã•ã‚ŒãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æ©Ÿç¨®ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ æ©Ÿç¨®ãƒªã‚¹ãƒˆã‹ã‚‰å‰Šé™¤ã™ã‚‹é–¢æ•°
     * @param {number} index - å‰Šé™¤ã™ã‚‹æ©Ÿç¨®ã®é…åˆ—ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
     */
    function deleteMachine(index) {
      // å‰Šé™¤ç¢ºèª
      if (confirm(`${userMachines[index].name} ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
        userMachines.splice(index, 1); // é…åˆ—ã‹ã‚‰å‰Šé™¤
        localStorage.setItem("userMachines", JSON.stringify(userMachines)); // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’æ›´æ–°
        showAlert("success", "âœ… å‰Šé™¤ã—ã¾ã—ãŸ"); // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        updateUserMachineList(); // ãƒªã‚¹ãƒˆè¡¨ç¤ºã‚’æ›´æ–°
        updateStats(); // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
      }
    }

    /**
     * å…¨ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ æ©Ÿç¨®ã‚’å‰Šé™¤ã™ã‚‹é–¢æ•°
     */
    function clearAllUserMachines() {
      // å…¨å‰Šé™¤ç¢ºèª
      if (confirm("æœ¬å½“ã«ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿç¨®ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) {
        userMachines = []; // é…åˆ—ã‚’ç©ºã«ã™ã‚‹
        localStorage.setItem("userMachines", JSON.stringify(userMachines)); // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’æ›´æ–°
        showAlert("success", "âœ… ã™ã¹ã¦ã®æ©Ÿç¨®ã‚’å‰Šé™¤ã—ã¾ã—ãŸ"); // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        updateUserMachineList(); // ãƒªã‚¹ãƒˆè¡¨ç¤ºã‚’æ›´æ–°
        updateStats(); // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
      }
    }

    /**
     * ç™»éŒ²æ¸ˆã¿æ©Ÿç¨®æ•°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ æ©Ÿç¨®æ•°ã€åˆè¨ˆæ©Ÿç¨®æ•°ã‚’è¡¨ç¤ºã™ã‚‹çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
     */
    function updateStats() {
      document.getElementById("base-count").textContent = baseMachines.length;
      document.getElementById("user-count").textContent = userMachines.length;
      document.getElementById("total-count").textContent = baseMachines.length + userMachines.length;
    }

    /**
     * ã‚¢ãƒ©ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
     * @param {string} type - ã‚¢ãƒ©ãƒ¼ãƒˆã®ç¨®é¡ ('success', 'danger', 'warning')
     * @param {string} message - è¡¨ç¤ºã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
     */
    function showAlert(type, message) {
      const alertArea = document.getElementById("alert-area");
      const alert = document.createElement("div");
      alert.className = `alert alert-${type}`; // CSSã‚¯ãƒ©ã‚¹ã‚’è¨­å®š
      alert.textContent = message;
      alertArea.appendChild(alert);

      // 3ç§’å¾Œã«ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è‡ªå‹•çš„ã«å‰Šé™¤
      setTimeout(() => alert.remove(), 3000);
    }

    // ------------------------------
    // ğŸš€ åˆæœŸè¡¨ç¤ºå‡¦ç†
    // ------------------------------
    updateUserMachineList(); // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½åŠ æ©Ÿç¨®ãƒªã‚¹ãƒˆã‚’åˆæœŸè¡¨ç¤º
    updateStats(); // çµ±è¨ˆæƒ…å ±ã‚’åˆæœŸè¡¨ç¤º
  </script>
</body>
</html>